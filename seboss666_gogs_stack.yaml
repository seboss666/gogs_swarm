version: '3'
networks:
  sebnet:
    driver: overlay

services:

  gogs:
    image: gogs/gogs:latest
    environment:
      - "PUID:1001"
      - "PGID:1001"
    networks:
      - sebnet
    ports:
      - "10022:22"
      - "10080:3000"
    volumes:
      - /home/seboss666/docker/gogs/:/data/
    deploy:
      replicas: 1
      restart_policy:
        condition: any

  dnsupdate:
    image: registry.seboss666.ovh/ovhdnsupdate:latest
    environment:
      - "CRON_SCHEDULE=* * * * *"
    networks:
      - sebnet
    volumes:
    - "/var/run/docker.sock:/var/run/docker.sock"
    deploy:
      replicas: 1
      restart_policy:
        condition: any
      placement:
        constraints:
          - node.role == manager